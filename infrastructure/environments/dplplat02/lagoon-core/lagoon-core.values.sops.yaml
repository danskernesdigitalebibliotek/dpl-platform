# These values must be set on install, as they don't have sensible defaults.
#ENCRYPT
harborAdminPassword: ENC[AES256_GCM,data:zJ/OdW+WF5AWWfYwmk8UnErbdJ8=,iv:fz7OFXoDVtc1x+SrppNuqvTfvhfCpXnMUcMxin8hW9k=,tag:eTnVVvqwKv2eopMvH/z0SQ==,type:str]
elasticsearchURL: none
harborURL: https://habor.lagoon.dplplat02.dpl.reload.dk
kibanaURL: none
#ENCRYPT
s3BAASSecretAccessKey: ENC[AES256_GCM,data:24TcNgNBrnUxILVNHsoTEdb60J4tUi4GBj+UIK0FTzyShLFWkEaewA==,iv:ycIvAW/PpiO9J8NGHTnW7tPPBlEqnIn3br7yZPIvvsc=,tag:zGQUL89ueRDSIJG/tWXo4A==,type:str]
#ENCRYPT
s3BAASAccessKeyID: ENC[AES256_GCM,data:Pr8AXOF/d7sE8HcwHCGhSY/Wdrg=,iv:OkV5iy7oK2i7stdzXBq5H8xpAJhl2HM3QQOqPkSdpTg=,tag:TAF++gjn220iI/Dof1n61w==,type:str]
#ENCRYPT
s3FilesAccessKeyID: ENC[AES256_GCM,data:lBiI/Q4SI9eXHuXB26Z3fTm3be4=,iv:f+WcNQ/BNQfOZoaW1CSUELxEh/jHlhCae30wN0/hUwA=,tag:1HKNsYKZ67Bv1wRb89gcsA==,type:str]
s3FilesBucket: lagoon-files-bucket
s3FilesHost: https://files.lagoon.dplplat02.dpl.reload.dk
#ENCRYPT
s3FilesSecretAccessKey: ENC[AES256_GCM,data:5O/R4NIr7XTWTvgIxMycF9hJ5BaVoKCcQSvSJWlV3lNgIwNTRbEvSA==,iv:AqhacK78hIBIxdvjJ8h7wTlvN67qzNZ7F1Qd36J9Tn8=,tag:v15aEbKB683uX/d7h2SfQA==,type:str]
# These values are optional.
# overwriteActiveStandbyTaskImage:
# appspecific discovery.json settings
# This should point to the publicly accessible ssh endpoint as a schema-less
# URI (either domain or IP) for the ssh-token (or fallback ssh) service
# e.g. ssh-token.example.com, ssh.example.com or 192.168.0.100
# The port will be read from the sshToken (or ssh) port value
# sshTokenEndpoint:
# These values are optional depending on the services Lagoon is integrated with
# in your environment.
# gitlabAPIToken:
# gitlabAPIURL:
# bitbucketAPIToken:
# bitbucketAPIURL:
# s3Region:
# These values may be set on install, otherwise the chart tries to guess
# sensible defaults.
# keycloakFrontEndURL: https://keycloak.example.com
# lagoonAPIURL: https://api.example.com/graphql
# lagoonUIURL: https://ui.example.com
# lagoonWebhookURL: https://webhook-handler.example.com
# These values are randomly generated on install if not otherwise defined.
#ENCRYPT
apiDBPassword: ENC[AES256_GCM,data:wxXrp21WPMbUzCM8qN+VX/NyKy148O72fdV8ts6s,iv:KUn7Cs1hXC+2n66fvxBq0jt1hOg9LA0FVKU2ccvWKyk=,tag:qOpYEwZyiaijyLd07KzgUw==,type:str]
#ENCRYPT
jwtSecret: ENC[AES256_GCM,data:Rtvo8mCk4IWRJJ+Ed0U3vfox6D+mt2gcUr/h6AEE,iv:WZspnuwLJJJJ3QfGjLaTzGCJ1/8CKfdZAHr/zTcTx6g=,tag:JYR40hmJtQZZjsLDTPD9xA==,type:str]
#ENCRYPT
keycloakAdminPassword: ENC[AES256_GCM,data:jLhYqzTfKWwU5sisQfsUlg==,iv:4A+2sGfy3ISDtOxrhxcmFcV1+HGrjCrjHkKthlu8aZM=,tag:WvoURAg/035MJc6xBoLzog==,type:str]
#ENCRYPT
keycloakAPIClientSecret: ENC[AES256_GCM,data:4Vhj47/lDvJ8AWzSaTak9GiCjuOOULpalp4L+H0E,iv:F6j6o3+MPUVjUXkuJLQhl20oXvaSFHqSE2gwF1n2DJk=,tag:xlXCx9UPjjvToPal5fsohw==,type:str]
#ENCRYPT
keycloakAuthServerClientSecret: ENC[AES256_GCM,data:4NmurjWEqMxMDd6FTjAOJoVtiwVhM4IiCtBBYHSv,iv:qmcOXxfPsppSrmm7Z8+YJZGtzHagUH73hwcoL6SLcKw=,tag:rVMP9zgN+wb9L1tBuqCKPg==,type:str]
#ENCRYPT
keycloakDBPassword: ENC[AES256_GCM,data:Vr0xpDTbxDOyZDtVijmIKjIBt5o8Dy52gaTDeVDE,iv:WQQniqRzPQHybKjp6sGuuvVuxDZgN3CKKe3o+Cts0cs=,tag:iyHkEMWjfLUMsME/O8iFyQ==,type:str]
#ENCRYPT
keycloakLagoonAdminPassword: ENC[AES256_GCM,data:M+dC6GSWF7um/onpJPrFpLTUlMEYavEgN3mXc836,iv:cZhgP37QTxZsf87QxnFliq49IIthRJsaKcIimfsKGSE=,tag:yjxnTh+cYP+XODNZ8zNRqQ==,type:str]
#ENCRYPT
logsDBAdminPassword: ENC[AES256_GCM,data:TwgUa6Im/8QQsTc/d/X3TpWf6ZRdA1E1CYiHDDAJ,iv:xpOdRVq4ncDkt1cgsvrdLHxqx9pTKs43TBJTc+W95ek=,tag:oD02YCF2FWQQenOycHZ8KA==,type:str]
#ENCRYPT
keycloakLagoonOpensearchSyncClientSecret: ENC[AES256_GCM,data:EOAY5KBkLE+GQB6BSpoGVev7C3+/sOLiB2mjhDd+,iv:xSUFk0LycSUHxVSDNtSm+4ZbElLIadkPC+AtT6BuHaE=,tag:GWDR0mkWGBtCT/e6fNKXiw==,type:str]
#ENCRYPT
keycloakServiceAPIClientSecret: ENC[AES256_GCM,data:JTQMuomtVR63gFO1sjs16vqxQJtCajanrz0hB53Z,iv:h7TLoAjPvvUTSScDyqBGnUY3AcfUtBtUnR9XNPBU+tw=,tag:H38+Fk6j7tJbV9y3FBH+aA==,type:str]
#ENCRYPT
rabbitMQPassword: ENC[AES256_GCM,data:XEayKgGEPN5M5ktqNuJDhsk4PYgzbedWFwqRDpkO,iv:mGRni00CaNuZkxdBwjtW/Y9nxh/lHgQJVQE9N50vpYU=,tag:phu3gjZ0I1RHh9wATqSGPQ==,type:str]
#ENCRYPT
redisPassword: ENC[AES256_GCM,data:zaYlRMOSuBJIW3bY32F3mMIjzMCfHc6z9mQ6goJv,iv:o1k+SqtPFfdaVd1ilyQirTWLVpnGZG8CnilCNcoHeRM=,tag:1Y6D6P6i2y4hakwDzYXkyQ==,type:str]
k8upBackupBucketName: lagoon-backup
# This value is set to match jwtSecret on existing installs if not defined.
# It should only ever be set here for backwards compatibility.
#ENCRYPT
projectSeed: ENC[AES256_GCM,data:TyvuqhCQmv4vIfPqMFAuJ0rpllgh6bMgH7p0/HPS,iv:MrDVVEJsVGWfHcu5GLHOLo+Y5JBhhabd8CKCNGh48ks=,tag:ocU3qnDKevQgjiNlKOHW/A==,type:str]
lagoonSeedOrganization: Danish Public Libraries
#ENCRYPT
lagoonSeedUsername: ENC[AES256_GCM,data:+aeNw/Ev,iv:OQAb83B3WI8ARR1kzUWxdMHEjSljpqcxmTGhUJwWaKI=,tag:olLNmiV5Z4lLgZ9qJXuivQ==,type:str]
#ENCRYPT
lagoonSeedPassword: ENC[AES256_GCM,data:FYCDmT8fTaYeVKgZJD1lpdFAaAOlfqluHDYS+KdX,iv:RH5u1iyjA9hYDgQ+VTqQsP8COXVVPd38LTuM7fSflew=,tag:tzpoagpe886wgZad3iHz5g==,type:str]
# These values are the chart defaults, but can be overridden.
imagePullSecrets: []
rabbitMQUsername: lagoon
k8upS3Endpoint: ""
#ENCRYPT
keycloakAdminUser: ENC[AES256_GCM,data:lvhSUbQ=,iv:9QRvJZhFFzT7ixia+8tWqgcjdCG/sLjYeHUr34viMRM=,tag:SQvhUebOXbb3yjc1WLYYqg==,type:str]
# this is required if email sending is to be enabled in keycloak
# keycloakAdminEmail: admin@example.com
buildDeployImage:
    edge:
        enabled: false
# Set to an empty string to support Harbor v1.x.x
harborAPIVersion: v2.0
# this default podSecurityContext is set for all services and can be overridden
# on the service level.
podSecurityContext:
    fsGroup: 10001
    runAsGroup: 0
    runAsUser: 10000
# Set the default ingressClass for the exposed lagoon-core services
# it can be overridden per-service if needed via ingress.ingressClassName
# Note that this is the Class, not the IngressName
# defaultIngressClassName: nginx
# this default image tag is set for all services and can be overridden
# on the service level, if not set it falls back to chart appVersion.
imageTag: ""
# This value is false by default, which means that Developers can SSH to
# Development environments as per the Lagoon documentation
# (https://docs.lagoon.sh/administering-lagoon/rbac/#developer).
# Set this to true to:
# * block Developers from SSH access to Lagoon environments; and
# * stop Developers from getting a redirect message when trying to SSH into the
#   ssh-token service.
# blockDeveloperSSH: false
# the following services are part of the lagoon-core chart
api:
    replicaCount: 2
    image:
        repository: uselagoon/api
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    service:
        type: ClusterIP
        port: 80
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
            nginx.ingress.kubernetes.io/ssl-redirect: "false"
        hosts:
            - host: api.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: api-tls
              hosts:
                - api.lagoon.dplplat02.dpl.reload.dk
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 256Mi
            cpu: 500m
        requests:
            memory: 256Mi
            cpu: 500m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        noderole.dplplatform: prod
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
apiDB:
    image:
        repository: uselagoon/api-db
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    service:
        type: ClusterIP
        port: 3306
    podAnnotations:
        appuio.ch/backupcommand: |
            /bin/sh -c "mysqldump --max-allowed-packet=500M --events --routines --quick --add-locks --no-autocommit --single-transaction --all-databases"
        backup.appuio.ch/file-extension: .api-db.sql
    securityContext: {}
    resources:
        requests:
            memory: 512Mi
            cpu: 500m
    additionalEnvs: null
    #   FOO: Bar
    storageSize: 128Gi
    terminationGracePeriodSeconds: 30
    startupProbe:
        # 60*10s period = 10 minutes
        failureThreshold: 60
        exec:
            command:
                - test
                - -f
                - /tmp/mariadb-init-complete
    livenessProbe:
        exec:
            command:
                - mysqladmin
                - --connect-timeout=4
                - ping
    readinessProbe:
        exec:
            command:
                - /usr/share/container-scripts/mysql/readiness-probe.sh
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
apiRedis:
    image:
        repository: uselagoon/api-redis
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 64Mi
            cpu: 50m
    additionalEnvs: null
    #   FOO: Bar
    persistence:
        enabled: false
        size: 100Mi
    service:
        type: ClusterIP
        port: 6379
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
keycloak:
    # keycloak realm and email settings configuration
    realmSettings:
        enabled: false
        # the full list of config settings is available TODO
        options:
            resetPasswordAllowed: true
            rememberMe: true
    email:
        enabled: false
        settings:
            host: mailhog
            port: "1025"
            from: lagoon@example.com
            fromDisplayName: Lagoon
            replyTo: lagoon@example.com
            ssl: "false"
            starttls: "false"
            auth: "false"
    replicaCount: 1
    image:
        repository: uselagoon/keycloak
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 1Gi
            cpu: 500m
    additionalEnvs: null
    #   FOO: Bar
    service:
        type: ClusterIP
        port: 8080
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
            nginx.ingress.kubernetes.io/proxy-body-size: 16m
            nginx.ingress.kubernetes.io/proxy-buffer-size: 256k
            nginx.ingress.kubernetes.io/proxy-buffering: "on"
            nginx.ingress.kubernetes.io/proxy-buffers-number: "4"
            nginx.ingress.kubernetes.io/proxy-max-temp-file-size: 128m
        hosts:
            - host: keycloak.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: keycloak-tls
              hosts:
                - keycloak.lagoon.dplplat02.dpl.reload.dk
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
keycloakDB:
    replicaCount: 1
    image:
        repository: uselagoon/keycloak-db
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    service:
        type: ClusterIP
        port: 3306
    podAnnotations:
        appuio.ch/backupcommand: |
            /bin/sh -c "mysqldump --max-allowed-packet=500M --events --routines --quick --add-locks --no-autocommit --single-transaction --all-databases"
        backup.appuio.ch/file-extension: .keycloak-db.sql
    securityContext: {}
    resources:
        requests:
            memory: 512Mi
            cpu: 100m
    additionalEnvs: null
    #   FOO: Bar
    terminationGracePeriodSeconds: 30
    startupProbe:
        # 60*10s period = 10 minutes
        failureThreshold: 60
        tcpSocket:
            port: mariadb
    livenessProbe:
        exec:
            command:
                - mysqladmin
                - --connect-timeout=4
                - ping
    readinessProbe:
        exec:
            command:
                - /usr/share/container-scripts/mysql/readiness-probe.sh
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
broker:
    replicaCount: 1
    image:
        repository: uselagoon/broker
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    service:
        type: ClusterIP
        ports:
            epmd: 4369
            amqp: 5672
            http: 15672
            metrics: 15692
        amqpExternal:
            enabled: false
            type: LoadBalancer
            port: 5672
    serviceMonitor:
        enabled: false
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 1Gi
            cpu: 500m
        requests:
            memory: 1Gi
            cpu: 500m
    additionalEnvs: null
    #   FOO: Bar
    serviceAccount:
        # Annotations to add to the service account
        annotations: {}
        # The name of the service account to use.
        # If not set and create is true, a name is generated using the fullname
        # template
        name: ""
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
        hosts:
            - host: broker.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: broker-tls
              hosts:
                - broker.lagoon.dplplat02.dpl.reload.dk
    startupProbe:
        # 60*10s period = 10 minutes
        failureThreshold: 60
        tcpSocket:
            port: amqp
    nodeSelector:
        noderole.dplplatform: prod
    tolerations:
        - effect: NoSchedule
          key: noderole.dplplatform
          operator: Equal
          value: prod
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
authServer:
    replicaCount: 2
    image:
        repository: uselagoon/auth-server
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    service:
        type: ClusterIP
        port: 80
        annotations: {}
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 64Mi
            cpu: 50m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
webhooks2tasks:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/webhooks2tasks
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 250Mi
            cpu: 50m
        requests:
            memory: 64Mi
            cpu: 50m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
webhookHandler:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/webhook-handler
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 250Mi
            cpu: 50m
        requests:
            memory: 64Mi
            cpu: 50m
    additionalEnvs: null
    #   FOO: Bar
    service:
        type: ClusterIP
        port: 3000
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
        hosts:
            - host: webhookhandler.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: webhookhandler-tls
              hosts:
                - webhookhandler.lagoon.dplplat02.dpl.reload.dk
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
ui:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/ui
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 128Mi
            cpu: 50m
    additionalEnvs: null
    #   FOO: Bar
    service:
        type: ClusterIP
        port: 3000
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
        hosts:
            - host: ui.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: ui-tls
              hosts:
                - ui.lagoon.dplplat02.dpl.reload.dk
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
actionsHandler:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/actions-handler
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    additionalEnvs: null
    #   FOO: Bar
    resources:
        limits:
            memory: 80Mi
            cpu: 30m
        requests:
            memory: 16Mi
            cpu: 10m
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
backupHandler:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/backup-handler
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 100Mi
            cpu: 100m
        requests:
            memory: 32Mi
            cpu: 50m
    additionalEnvs: null
    #   FOO: Bar
    service:
        type: ClusterIP
        port: 3000
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
        hosts:
            - host: backuphandler.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: backuphandler-tls
              hosts:
                - backuphandler.lagoon.dplplat02.dpl.reload.dk
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
insightsHandler:
    enabled: false
    replicaCount: 2
    image:
        repository: uselagoon/insights-handler
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: v0.0.5
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 32Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    trivy:
        enabled: false
        image:
            repository: aquasec/trivy
            tag: 0.48.0
        service:
            type: ClusterIP
            port: 4954
logs2notifications:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/logs2notifications
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    logs2slack:
        disabled: true
    logs2rocketchat:
        disabled: true
    logs2microsoftteams:
        disabled: true
    logs2email:
        disabled: true
    logs2webhooks:
        disabled: true
    logs2s3:
        disabled: false
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 180Mi
            cpu: 100m
        requests:
            memory: 16Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
drushAlias:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/drush-alias
        pullPolicy: Always
        # Overrides the image tag whose default is "latest".
        tag: v3.1.0
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 8Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
    service:
        type: ClusterIP
        port: 8080
    ingress:
        enabled: true
        annotations:
            kubernetes.io/tls-acme: "true"
            kubernetes.io/ingress.class: nginx
        hosts:
            - host: drushalias.lagoon.dplplat02.dpl.reload.dk
              paths:
                - /
        tls:
            - secretName: drushalias-tls
              hosts:
                - drushalias.lagoon.dplplat02.dpl.reload.dk
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
ssh:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/ssh
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 128Mi
            cpu: 500m
    additionalEnvs: null
    #   FOO: Bar
    service:
        type: LoadBalancer
        port: 22
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
workflows:
    enabled: true
    replicaCount: 2
    image:
        repository: uselagoon/workflows
        pullPolicy: Always
        # Overrides the image tag whose default is the chart appVersion.
        tag: ""
    podAnnotations: {}
    securityContext: {}
    resources:
        limits:
            memory: 80Mi
            cpu: 50m
        requests:
            memory: 16Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    nodeSelector:
        node-role.kubernetes.io/prod: ""
    tolerations:
        - key: noderole.dplplatform
          operator: Equal
          value: prod
          effect: NoSchedule
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    - matchExpressions:
                        - key: noderole.dplplatform
                          operator: In
                          values:
                            - prod
nats:
    enabled: false
    # inject additional config
    additionalVolumes:
        - name: lagoon-core-nats-tls
          secret:
            secretName: lagoon-core-nats-tls
    additionalVolumeMounts:
        - name: lagoon-core-nats-tls
          mountPath: /etc/lagoon-core-nats-tls
    nats:
        config:
            - name: lagoon-core
              secret:
                secretName: lagoon-core-nats-conf
    cluster:
        enabled: true
        name: lagoon-core
        # internal cluster IPs are not routable, so don't advertise them
        noAdvertise: true
    natsbox:
        enabled: false
    # to connect to nats, pods must have the right label
    networkPolicy:
        enabled: true
        allowExternal: false
        # allow inbound leaf connections
        extraIngress:
            - ports:
                - port: 7422
                  protocol: TCP
natsService:
    # this service is enabled via nats.enabled
    type: LoadBalancer
    leafnodes:
        port: 7422
natsConfig:
    users:
        lagoonRemote: []
        # Remote cluster  credentials and the account they have access to are
        # specified here.
        #
        # - user: ...
        #   password: ...
    tls: {}
    # If the lagoon-core-nats-tls secret should be created by the lagoon-core
    # chart, certificate values can be specified directly in secretData.
    # Configuring TLS this way also allows specifying a custom ca.crt.
    #
    # secretData:
    #   ca.crt: |
    #     ...
    #   server.crt: |
    #     ...
    #   server.key: |
    #     ...
    #
    # If the TLS secret is created outside the lagoon-core chart, it should be
    # named lagoon-core-nats-tls. This secret should contain fields tls.crt and
    # tls.key, and the certificate should be issued by a public authority.
sshPortalAPI:
    enabled: false
    replicaCount: 2
    image:
        repository: ghcr.io/uselagoon/lagoon-ssh-portal/ssh-portal-api
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: v0.36.0
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 8Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    serviceAccount:
        # Annotations to add to the service account
        annotations: {}
        # The name of the service account to use.
        # If not set and create is true, a name is generated using the fullname
        # template
        name: ""
    serviceMonitor:
        enabled: true
    service:
        type: ClusterIP
        ports:
            metrics: 9911
opensearchSync:
    enabled: false
    image:
        repository: ghcr.io/uselagoon/lagoon-opensearch-sync
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: v0.8.0
    # debug logging toggle
    debug: false
    # root certificate for the server certificate presented by opensearch
    opensearchCACertificate: ""
    # -----BEGIN CERTIFICATE-----
    # ...
    # -----END CERTIFICATE-----
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 8Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
sshToken:
    enabled: false
    replicaCount: 2
    image:
        repository: ghcr.io/uselagoon/lagoon-ssh-portal/ssh-token
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: v0.36.0
    podAnnotations: {}
    securityContext: {}
    resources:
        requests:
            memory: 8Mi
            cpu: 10m
    additionalEnvs: null
    #   FOO: Bar
    autoscaling:
        enabled: false
        minReplicas: 1
        maxReplicas: 100
        targetCPUUtilizationPercentage: 80
        # targetMemoryUtilizationPercentage: 80
    serviceMonitor:
        enabled: true
    service:
        type: LoadBalancer
        ports:
            sshserver: 22
    metricsService:
        type: ClusterIP
        ports:
            metrics: 9948
    # host keys, PEM encoded
    hostKeys:
        ecdsa: ""
        ed25519: ""
        rsa: ""
sops:
    azure_kv:
        - vault_url: https://kv-dplplat01-c3b2.vault.azure.net
          name: sops-key
          version: d82fe2456d6e4c4aaaaf808226bd5769
          created_at: "2026-01-22T15:04:04Z"
          enc: rj_eV5hbfqM7Rd0SUtx_vWf8h1grgAR8xTpKrpz5If1RUHDZGgi6OqnTPsupNwrnS8KOGhiJ45enIM5GGg40PGzGHF4NGleoGMP-RRLNa9cC4Uf5pri55L-rkYAMV5_PjZ-ZXQicofRP-n1QFp2tAGoqr97TykamMiUFy42mPpznEUf8jRl_jeKT3ONog2xBME90P-Sgqh4PQS58rMXmFZ29wHrKj7WvGs0z0h7PyReS81qen27fZ1WLM2a4RQYPnlUtnccBMBpGWKllNs6FCKdSHw1BcB5EjysR-Lk5_fisgTfapibQJhHMetu4j1Je6FlYcSD7-FoMyOX6ILm4Q6vvBjJ2fPwJEgkeBCFTAsI0FH8JD0vCekIwyof-Sv1FnUZeDnIXSoL6_aphRAcIKcioR095ZfIoSwpWbRLt73z9dY1Jdb2i02wD2-rqLmoTsMW6mLta_bMtRMHwn5iqGQRVbuuMfrWzAAUOvhl-OZ93hGVeKciZhw65kE5VcCDJitTwXy4nLMur5MFyNkpV3nuPcP7ovFLj51uk7avHMKgBG2iZ2Eye9eESyLGS__59DJsGAHitOZRhk4QVX4KocoyIBeb-6HXsVyHEOLgTo7emycFfvnJAebskQXTFMju8rcU9qqGf7wSBTCbX-QMkZhk1cq2PHLoizsdIEUduiLE
    age:
        - recipient: age1q8yqc5jvhkk7ufj95tw25u3es0846pkrwgcd4pn9ctermr7e6cesn6l0gd
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBPR1pKNjQ4d2VQUDVDWlBM
            V3gyM1h2NUQvUzA0am1xdjQ3bjRzL1hadERNClNrUGltNC9LcFJLRXluWFdaN0JL
            bThEb0VoQ0xtTnpDYk8wZkVwQ1BCaEEKLS0tIC9wczBub1RTNUt1WkZVK2dmMHJ4
            eUZaT1hhRGY5aTJEdFhKZm5MUXpSM0UKQ8XPnlvFGKDU0evEVpl9Kztdqgd6KKn6
            7VKfKRqLtKshnAsnaCtP9iC4CWL+N3iqmMXqLAGnXvNizFUrEeeyYA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-01-22T15:04:06Z"
    mac: ENC[AES256_GCM,data:hfflIF5g7zJviVTZM0ZC5f42Hkkd5cXqoYfjeJkdgkj8dljUVf7QrWbwWMQzOQ2XB4El/R5RjjjSG7O/6edl4c63LdGZ547TcCUvNa8/HOIM2ZPyFWXQ0vaCcMa9KuRXw55sjUwzprHNQ0WPOJKVd7lLxqNmHdJpEFoYXXOph0w=,iv:sp+bRa8R8lMiV3/m5a6+fxpnbYq3/AJcsBBjUGLVrBA=,tag:c74iLlBLoHlID4X3iryZMw==,type:str]
    encrypted_comment_regex: ENCRYPT
    version: 3.11.0
